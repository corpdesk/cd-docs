<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>ASDAP | Docs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta
        content="Nazox is a fully featured premium Angular 17 admin dashboard template built on top of awesome Bootstrap 5.1.0"
        name="description" />
    <meta content="ThemesDesign" name="author" />
    <!-- App favicon -->
    <link rel="shortcut icon" href="assets/images/favicon.ico">

    <!-- Bootstrap Css -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- Icons Css -->
    <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css" />
    <!-- App Css-->
    <link href="assets/css/app.min.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/workflow.css" rel="stylesheet" type="text/css" />
    <link href="assets/css/code-button.css" rel="stylesheet" type="text/css" />

</head>

<body data-sidebar="dark">

    <!-- Begin page -->
    <!-- Begin page -->
    <div id="layout-wrapper">

        <header id="page-topbar">
            <div class="navbar-header">
                <div class="d-flex">
                    <!-- LOGO -->
                    <div class="navbar-brand-box">
                        <a href="index.html" class="logo logo-light">
                            <span class="logo-sm">
                                <img src="assets/images/logo-sm-light.png" alt="" height="22">
                            </span>
                            <span class="logo-lg">
                                <img src="assets/images/logo-light.png" alt="" height="20">
                            </span>
                        </a>
                    </div>
                </div>
            </div>
        </header>

        <!-- ========== Left Sidebar Start ========== -->
        <div class="vertical-menu">
            <div data-simplebar class="h-100">
                <!--- Sidemenu -->
                <div id="sidebar-menu">
                    <ul class="metismenu list-unstyled" id="side-menu">
                        <li class="menu-title">Docs</li>
                        <li>
                            <a href="index.html" class="waves-effect">
                                <i class="mdi mdi-file-document-box-outline"></i>
                                <span>Introduction</span>
                            </a>
                        </li>
                        <li>
                            <a href="processing-request-generic.html" class="waves-effect">
                                <i class="mdi mdi-file-document-box-outline"></i>
                                <span>Process Request - Generic</span>
                            </a>
                        </li>
                        <li>
                            <a href="process-request-nodejs.html" class="waves-effect">
                                <i class="mdi mdi-file-document-box-outline"></i>
                                <span>Process Request - Node.js</span>
                            </a>
                        </li>
                        <li>
                            <a href="directory-structure.html" class="waves-effect">
                                <i class="mdi mdi-file-document-box-outline"></i>
                                <span>Directory Structure</span>
                            </a>
                        </li>
                        <li>
                            <a href="corpdesk-crud.html" class="waves-effect">
                                <i class="mdi mdi-file-document-box-outline"></i>
                                <span>Module CRUD</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- Left Sidebar End -->

        <!-- ============================================================== -->
        <!-- Start right Content here -->
        <!-- ============================================================== -->
        <div class="main-content">
            <div class="page-content">
                <div class="container-fluid">
                    <!-- start page title -->
                    <div class="row">
                        <div class="col-12">
                            <div class="page-title-box d-flex align-items-center justify-content-between">
                                <h4 class="mb-0 font-size-18">API Request Processing</h4>
                                <div class="page-title-right">
                                    <ol class="breadcrumb m-0">
                                        <li class="breadcrumb-item"><a href="javascript: void(0);">API</a></li>
                                        <li class="breadcrumb-item">Request Processing</li>
                                        <li class="breadcrumb-item active">Generic</li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- end page title -->

                    <div class="card">
                        <div class="card-body">
                            <div class="p-lg-3">
                                <h5>API Request Processing (Language Agnostic)</h5>

                                <!-- Introduction -->
                                <p>
                                    Corpdesk API is built to operate independently of the implementation language,
                                    ensuring seamless interoperability across platforms. Requests and responses are
                                    always exchanged in JSON format using the standardized <code>ICdRequest</code> and
                                    <code>ICdResponse</code> interfaces. This design allows developers to implement the
                                    framework in various programming languages and ensures compatibility across client
                                    and server applications.
                                </p>
                                <p>
                                    Whether using Go, Python, C, C++, or C#, the principle remains the same: the client
                                    only needs the API endpoint, and the server processes JSON requests and responds in
                                    the defined format. This consistent approach lays the foundation for a
                                    community-driven ecosystem where developers adhere to Corpdesk protocols or RFCs,
                                    enabling collaboration and innovation.
                                </p>

                                <!-- ICdRequest Explanation -->
                                <h6>Understanding ICdRequest</h6>
                                <p>
                                    The <code>ICdRequest</code> interface standardizes how API requests are structured.
                                    It defines the necessary fields to identify the module, controller, and action to be
                                    executed on the server. Key attributes include:
                                </p>
                                <ul>
                                    <li><code>ctx:</code> Context specifying the module's location (e.g.,
                                        <code>App</code> or <code>Sys</code>).</li>
                                    <li><code>m:</code> The module name.</li>
                                    <li><code>c:</code> The controller name.</li>
                                    <li><code>a:</code> The action within the controller.</li>
                                    <li><code>dat:</code> The payload containing command settings and parameters.</li>
                                </ul>
                                <div class="code-container">
                                    <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                                    <pre><code class="language-json">
                    {
                        "ctx": "Sys",
                        "m": "User",
                        "c": "User",
                        "a": "Login",
                        "dat": {
                            "f_vals": [
                                {
                                    "data": {
                                        "userName": "karl",
                                        "password": "secret"
                                    }
                                }
                            ],
                            "token": null
                        },
                        "args": null
                    }
                                    </code></pre>
                                </div>

                                <!-- ICdResponse Explanation -->
                                <h6>Understanding ICdResponse</h6>
                                <p>
                                    The <code>ICdResponse</code> interface ensures a consistent format for server
                                    responses, enabling predictable client behavior. Its structure includes:
                                </p>
                                <ul>
                                    <li><code>app_state:</code> Metadata about the response, including success status,
                                        error codes, and session information.</li>
                                    <li><code>data:</code> The actual payload, containing results or error details.</li>
                                </ul>
                                <div class="code-container">
                                    <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                                    <pre><code class="language-json">
                    {
                        "app_state": {
                            "success": true,
                            "info": {
                                "messages": [],
                                "code": "",
                                "app_msg": "Login successful"
                            },
                            "sess": {
                                "cd_token": "abc123",
                                "jwt": null,
                                "ttl": 600
                            },
                            "cache": {}
                        },
                        "data": {
                            "userId": "12345",
                            "userName": "karl"
                        }
                    }
                                    </code></pre>
                                </div>

                                <!-- Implementation Steps -->
                                <h6>Step-by-Step Request Handling (Language Agnostic)</h6>

                                <h6>Step 1: Initializing the Application</h6>
                                <p>
                                    Define a configuration file to handle runtime settings like entry points,
                                    environment variables, and debug options:
                                </p>
                                <div class="code-container">
                                    <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                                    <pre><code class="language-json">
                    {
                        "scripts": {
                            "start": "DEBUG=wss:* app-entry ./src/main"
                        }
                    }
                                    </code></pre>
                                </div>

                                <h6>Step 2: Launching the Application</h6>
                                <p>
                                    Create a main entry file to initialize and run the application:
                                </p>
                                <div class="code-container">
                                    <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                                    <pre><code class="language-javascript">
                    function main() {
                        const app = new App();
                        app.run();
                    }
                    main();
                                    </code></pre>
                                </div>

                                <h6>Step 3: Configuring the Application</h6>
                                <p>
                                    Set up configurations for CORS, SSL, and request routing:
                                </p>
                                <div class="code-container">
                                    <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                                    <pre><code class="language-javascript">
                    function run() {
                        configureCors();
                        setupSsl();
                        app.post("/api", handleRequest);
                    
                        if (config.sioEnabled) {
                            // Run in WebSocket mode
                        }
                        if (config.wssEnabled) {
                            // Run with Secure WebSocket
                        }
                    }
                                    </code></pre>
                                </div>

                                <h6>Step 4: Initializing Requests</h6>
                                <p>
                                    Use a request initializer to validate and prepare incoming requests for execution:
                                </p>
                                <div class="code-container">
                                    <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                                    <pre><code class="language-javascript">
                    function handleRequest(req, res) {
                        const request = new Request(req);
                        request.process(async () => {
                            const executor = new Executor();
                            await executor.execute(req, res);
                        });
                    }
                                    </code></pre>
                                </div>

                                <h6>Step 5: Executing Requests</h6>
                                <p>
                                    Process the request payload, resolve the target module, controller, and action, and
                                    generate a response:
                                </p>
                                <div class="code-container">
                                    <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                                    <pre><code class="language-javascript">
                    class Executor {
                        async execute(req, res) {
                            const payload = req.body;
                            const target = resolveTarget(payload);
                            
                            try {
                                const response = await target.action(payload.data);
                                res.json(response);
                            } catch (error) {
                                res.status(500).json({ error: "Request execution failed" });
                            }
                        }
                    }
                                    </code></pre>
                                </div>

                                <h6>Conclusion</h6>
                                <p>
                                    The Corpdesk framework ensures consistent and predictable interactions between
                                    clients and servers, independent of their implementation languages. Adhering to
                                    <code>ICdRequest</code> and <code>ICdResponse</code> standards allows developers to
                                    build interoperable systems that align with Corpdesk protocols, fostering a
                                    collaborative ecosystem for innovation.
                                </p>
                            </div>
                        </div>
                    </div>


                    <!-- end of card -->
                </div>
            </div>
        </div>
        <script src="assets/libs/jquery/jquery.min.js"></script>
        <script src="assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
    </div>
    <!-- END layout-wrapper -->

    <!-- JAVASCRIPT -->
    <script src="assets/libs/jquery/jquery.min.js"></script>
    <script src="assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/libs/metismenu/metisMenu.min.js"></script>
    <script src="assets/libs/simplebar/simplebar.min.js"></script>
    <script src="assets/libs/node-waves/waves.min.js"></script>

    <!-- Prism CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/themes/prism.min.css" rel="stylesheet">
    <!-- Prism JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/prism.min.js"></script>

    <!-- Highlight.js CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css" rel="stylesheet">
    <!-- Highlight.js JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>



    <script src="assets/js/app.js"></script>
    <script src="assets/js/code-button.js"></script>

</body>

</html>